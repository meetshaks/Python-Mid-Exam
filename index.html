<!-- z3_v2_v1.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python MCQ Examination</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --white: #ffffff;
            --light-gray: #f8fafc;
            --medium-gray: #e2e8f0;
            --dark-gray: #334155;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(37, 99, 235, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(37, 99, 235, 0.07) 0%, transparent 20%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Welcome Page Styles */
        .welcome-page {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .welcome-page::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: var(--gradient-1);
            z-index: -1;
            border-radius: 0 0 50% 50% / 0 0 20% 20%;
        }

        .welcome-header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 1s ease-out;
        }

        .welcome-header i {
            font-size: 4rem;
            color: var(--white);
            margin-bottom: 20px;
            background: var(--gradient-1);
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
            animation: pulse 2s infinite;
        }

        .welcome-header h1 {
            color: var(--white);
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .welcome-header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
            margin-top: 10px;
        }

        .card {
            background-color: var(--white);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .instructions {
            border-left: 4px solid var(--primary);
            padding-left: 20px;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-out 0.5s both;
        }

        .instructions h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
        }

        .instructions h2 i {
            margin-right: 10px;
        }

        .instructions ul {
            list-style-type: none;
        }

        .instructions li {
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            padding: 8px 0;
            transition: transform 0.2s ease;
        }

        .instructions li:hover {
            transform: translateX(5px);
        }

        .instructions li i {
            color: var(--primary);
            margin-right: 10px;
            margin-top: 5px;
        }

        .exam-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
            animation: fadeIn 1s ease-out 0.7s both;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 15px;
            background: linear-gradient(145deg, #f8fafc, #e2e8f0);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .info-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--gradient-1);
        }

        .info-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-content {
            position: relative;
            background-color: var(--white);
            margin: 15% auto;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.3s ease-out;
        }

        .modal-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-header i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .modal-body {
            text-align: center;
            margin-bottom: 25px;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .modal .btn {
            min-width: 120px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .info-item i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .info-item .value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .info-item .label {
            font-size: 0.9rem;
            color: var(--dark-gray);
            text-align: center;
        }

        .form-container {
            animation: fadeIn 1s ease-out 0.9s both;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-gray);
        }

        .form-group input {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background-color: var(--light-gray);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            background-color: var(--white);
        }

        .checkbox-group {
            display: flex;
            align-items: flex-start;
            margin-bottom: 25px;
            padding: 15px;
            background-color: rgba(37, 99, 235, 0.05);
            border-radius: 8px;
        }

        .checkbox-group input {
            margin-right: 10px;
            margin-top: 5px;
            transform: scale(1.2);
        }

        .btn {
            background: var(--gradient-1);
            color: var(--white);
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.4);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:disabled {
            background: var(--medium-gray);
            cursor: not-allowed;
            box-shadow: none;
        }

        .btn i {
            margin-right: 10px;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Exam Page Styles */
        .exam-page {
            display: none;
            min-height: 100vh;
            padding-top: 80px;
        }

        .exam-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .exam-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 700;
        }

        .timer {
            display: flex;
            align-items: center;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--danger);
        }

        .timer i {
            margin-right: 8px;
        }

        .candidate-info {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }

        .candidate-card {
            flex: 1;
            min-width: 200px;
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .candidate-card h3 {
            font-size: 0.9rem;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }

        .candidate-card p {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
        }

        .stat-card i {
            font-size: 1.5rem;
            margin-right: 15px;
            padding: 10px;
            border-radius: 50%;
        }

        .stat-card.answered i {
            color: var(--success);
            background-color: rgba(16, 185, 129, 0.1);
        }

        .stat-card.switches i {
            color: var(--warning);
            background-color: rgba(245, 158, 11, 0.1);
        }

        .stat-card.warnings i {
            color: var(--danger);
            background-color: rgba(239, 68, 68, 0.1);
        }

        .stat-card.save i {
            color: var(--primary);
            background-color: rgba(37, 99, 235, 0.1);
        }

        .stat-content h3 {
            font-size: 0.9rem;
            color: var(--dark-gray);
            margin-bottom: 5px;
        }

        .stat-content p {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .progress-container {
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .progress-bar {
            height: 10px;
            background-color: var(--medium-gray);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.5s ease;
        }

        .question-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }

        .questions-panel {
            background-color: var(--white);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .question-card {
            border-bottom: 1px solid var(--medium-gray);
            padding: 20px 0;
        }

        .question-card:last-child {
            border-bottom: none;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .question-number {
            font-weight: 700;
            color: var(--primary);
        }

        .question-status {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 4px;
        }

        .status-unanswered {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .status-answered {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: flex-start;
            padding: 10px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }

        .option:hover {
            background-color: var(--light-gray);
        }

        .option input {
            margin-right: 10px;
            margin-top: 5px;
        }

        .navigator-panel {
            background-color: var(--white);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .navigator-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .navigator-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-item {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-item.unanswered {
            background-color: var(--medium-gray);
            color: var(--dark-gray);
        }

        .nav-item.answered {
            background-color: var(--primary);
            color: var(--white);
        }

        .nav-item.current {
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .nav-item:hover {
            transform: scale(1.1);
        }

        .pagination {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* Result Page Styles */
        .result-page {
            display: none;
            min-height: 100vh;
            padding: 40px 0;
        }

        .result-container {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .result-title {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: conic-gradient(var(--primary) 0%, var(--primary) var(--score-percent), var(--medium-gray) var(--score-percent), var(--medium-gray) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            position: relative;
        }

        .score-circle::before {
            content: "";
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: var(--white);
        }

        .score-value {
            position: relative;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-stat {
            padding: 15px;
            border-radius: 8px;
        }

        .result-stat.correct {
            background-color: rgba(16, 185, 129, 0.1);
        }

        .result-stat.incorrect {
            background-color: rgba(239, 68, 68, 0.1);
        }

        .result-stat.unanswered {
            background-color: rgba(245, 158, 11, 0.1);
        }

        .result-stat h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .result-stat.correct h3 {
            color: var(--success);
        }

        .result-stat.incorrect h3 {
            color: var(--danger);
        }

        .result-stat.unanswered h3 {
            color: var(--warning);
        }

        .result-stat p {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .time-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .time-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .time-stat i {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .time-stat h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .time-stat p {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            z-index: 1000;
            transform: translateX(120%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification i {
            font-size: 1.5rem;
            margin-right: 15px;
        }

        .notification.warning i {
            color: var(--warning);
        }

        .notification.error i {
            color: var(--danger);
        }

        .notification.info i {
            color: var(--primary);
        }

        .notification-content h3 {
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .notification-content p {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(37, 99, 235, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
            }
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .question-container {
                grid-template-columns: 1fr;
            }

            .navigator-panel {
                position: static;
                margin-top: 20px;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }

            .exam-title {
                font-size: 1.2rem;
            }

            .timer {
                font-size: 1rem;
            }

            .candidate-info {
                flex-direction: column;
            }

            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }

            .result-stats {
                grid-template-columns: 1fr;
            }

            .time-stats {
                flex-direction: column;
                gap: 15px;
            }

            .navigator-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 576px) {
            .welcome-header h1 {
                font-size: 2rem;
            }

            .card {
                padding: 15px;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }

            .navigator-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .pagination {
                flex-direction: column;
                gap: 10px;
            }

            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Page -->
    <div class="welcome-page" id="welcomePage">
        <div class="container">
            <div class="welcome-header">
                <i class="fas fa-laptop-code"></i>
                <h1>Python MCQ Examination</h1>
                <p>Test your Python knowledge with this comprehensive exam</p>
            </div>

            <div class="card">
                <div class="instructions">
                    <h2><i class="fas fa-info-circle"></i> Examination Instructions</h2>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> This exam consists of 50 multiple-choice questions.</li>
                        <li><i class="fas fa-check-circle"></i> You will have 60 minutes to complete the exam.</li>
                        <li><i class="fas fa-check-circle"></i> Do not switch tabs or minimize the browser window during the exam.</li>
                        <li><i class="fas fa-check-circle"></i> Copy, paste, and right-click are disabled during the exam.</li>
                        <li><i class="fas fa-check-circle"></i> You are allowed a maximum of 3 tab switches before auto-submission.</li>
                        <li><i class="fas fa-check-circle"></i> Your progress is automatically saved every 30 seconds.</li>
                        <li><i class="fas fa-check-circle"></i> Questions will be presented in a randomized order for each student.</li>
                        <li><i class="fas fa-check-circle"></i> Ensure a stable internet connection throughout the exam.</li>
                        <li><i class="fas fa-check-circle"></i> Click Submit when you have completed all questions.</li>
                    </ul>
                </div>

                <div class="exam-info">
                    <div class="info-item">
                        <i class="fas fa-question-circle"></i>
                        <div class="value">50</div>
                        <div class="label">Total Questions</div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-list-ol"></i>
                        <div class="value">5</div>
                        <div class="label">Questions Per Page</div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-file-alt"></i>
                        <div class="value">10</div>
                        <div class="label">Total Pages</div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-exchange-alt"></i>
                        <div class="value">3</div>
                        <div class="label">Max Tab Switches</div>
                    </div>
                </div>

                <div class="form-container">
                    <form id="studentForm">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="studentId">Student ID</label>
                            <input type="text" id="studentId" name="studentId" required>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="agreement" name="agreement" required>
                            <label for="agreement">I have read and agree to the examination instructions and rules.</label>
                        </div>
                        <button type="submit" class="btn btn-block" id="startExamBtn" disabled>
                            <i class="fas fa-play"></i> Start Exam
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Exam Page -->
    <div class="exam-page" id="examPage">
        <div class="exam-header">
            <div class="header-content">
                <div class="exam-title">Python MCQ Examination</div>
                <div class="timer">
                    <i class="fas fa-clock"></i>
                    <span id="timerDisplay">60:00</span>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="candidate-info">
                <div class="candidate-card">
                    <h3>Name</h3>
                    <p id="candidateName">-</p>
                </div>
                <div class="candidate-card">
                    <h3>Email</h3>
                    <p id="candidateEmail">-</p>
                </div>
                <div class="candidate-card">
                    <h3>Student ID</h3>
                    <p id="candidateId">-</p>
                </div>
            </div>

            <div class="stats-container">
                <div class="stat-card answered">
                    <i class="fas fa-check-circle"></i>
                    <div class="stat-content">
                        <h3>Answered</h3>
                        <p id="answeredCount">0</p>
                    </div>
                </div>
                <div class="stat-card switches">
                    <i class="fas fa-exchange-alt"></i>
                    <div class="stat-content">
                        <h3>Tab Switches</h3>
                        <p id="switchCount">0</p>
                    </div>
                </div>
                <div class="stat-card warnings">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div class="stat-content">
                        <h3>Warnings</h3>
                        <p id="warningCount">0</p>
                    </div>
                </div>
                <div class="stat-card save">
                    <i class="fas fa-save"></i>
                    <div class="stat-content">
                        <h3>Auto-save</h3>
                        <p id="saveStatus">Active</p>
                    </div>
                </div>
            </div>

            <div class="progress-container">
                <h3>Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">0% Complete (0/50 questions)</p>
            </div>

            <div class="question-container">
                <div class="questions-panel" id="questionsPanel">
                    <!-- Questions will be dynamically inserted here -->
                </div>

                <div class="navigator-panel">
                    <h3 class="navigator-title">Question Navigator</h3>
                    <div class="navigator-grid" id="navigatorGrid">
                        <!-- Navigator items will be dynamically inserted here -->
                    </div>
                    <div class="pagination">
                        <button class="btn" id="prevBtn" disabled>
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button class="btn" id="nextBtn">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    <button class="btn btn-block" id="submitBtn" style="margin-top: 20px; background-color: var(--success);">
                        <i class="fas fa-paper-plane"></i> Submit Exam
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Result Page -->
    <div class="result-page" id="resultPage">
        <div class="container">
            <div class="result-container">
                <h1 class="result-title">Examination Results</h1>
                
                <div class="score-circle" id="scoreCircle">
                    <div class="score-value" id="scoreValue">0%</div>
                </div>

                <div class="result-stats">
                    <div class="result-stat correct">
                        <h3 id="correctCount">0</h3>
                        <p>Correct Answers</p>
                    </div>
                    <div class="result-stat incorrect">
                        <h3 id="incorrectCount">0</h3>
                        <p>Incorrect Answers</p>
                    </div>
                    <div class="result-stat unanswered">
                        <h3 id="unansweredCount">0</h3>
                        <p>Unanswered Questions</p>
                    </div>
                </div>

                <div class="time-stats">
                    <div class="time-stat">
                        <i class="fas fa-hourglass-half"></i>
                        <h3 id="timeTaken">0:00</h3>
                        <p>Time Taken</p>
                    </div>
                    <div class="time-stat">
                        <i class="fas fa-exchange-alt"></i>
                        <h3 id="totalSwitches">0</h3>
                        <p>Tab Switches</p>
                    </div>
                    <div class="time-stat">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3 id="totalWarnings">0</h3>
                        <p>Warnings Received</p>
                    </div>
                </div>

                <button class="btn" id="downloadBtn">
                    <i class="fas fa-download"></i> Download Result (JSON)
                </button>
                <button class="btn" id="retakeBtn" style="margin-top: 15px; background-color: var(--primary);">
                    <i class="fas fa-redo"></i> Retake Exam
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification" id="notification">
        <i class="fas fa-exclamation-triangle"></i>
        <div class="notification-content">
            <h3 id="notificationTitle">Warning</h3>
            <p id="notificationMessage">This is a warning message.</p>
        </div>
    </div>

    <script>
        // Questions data (from the provided document)
        const originalQuestions = [
            {
                id: 1,
                text: "What is the output of: print(type(3.0)) ?",
                options: [
                    { id: "A", text: "<class 'int'>" },
                    { id: "B", text: "<class 'float'>" },
                    { id: "C", text: "<class 'str'>" },
                    { id: "D", text: "<class 'complex'>" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-1"
            },
            {
                id: 2,
                text: "Which of these is an immutable sequence type?",
                options: [
                    { id: "A", text: "list" },
                    { id: "B", text: "dict" },
                    { id: "C", text: "tuple" },
                    { id: "D", text: "set" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-3"
            },
            {
                id: 3,
                text: "What does the expression 'a' + 'b' produce in Python?",
                options: [
                    { id: "A", text: "('a','b')" },
                    { id: "B", text: "['a','b']" },
                    { id: "C", text: "None" },
                    { id: "D", text: "'ab' (string concatenation)" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-1"
            },
            {
                id: 4,
                text: "Which statement about Python sets is true?",
                options: [
                    { id: "A", text: "They are unordered and contain unique elements." },
                    { id: "B", text: "They preserve insertion order like lists." },
                    { id: "C", text: "They allow duplicate entries." },
                    { id: "D", text: "They are indexed by integer positions." }
                ],
                correctAnswer: "A",
                source: "Source: Lec-12"
            },
            {
                id: 5,
                text: "Which method removes an element from a set without raising an error if absent?",
                options: [
                    { id: "A", text: "remove()" },
                    { id: "B", text: "discard()" },
                    { id: "C", text: "pop()" },
                    { id: "D", text: "delete()" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-12"
            },
            {
                id: 6,
                text: "What is the time complexity of membership test (x in s) for a set?",
                options: [
                    { id: "A", text: "Average O(1)" },
                    { id: "B", text: "O(n)" },
                    { id: "C", text: "O(log n)" },
                    { id: "D", text: "O(n log n)" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-12"
            },
            {
                id: 7,
                text: "Which of these will raise a TypeError when used as a set element?",
                options: [
                    { id: "A", text: "42" },
                    { id: "B", text: "'hello'" },
                    { id: "C", text: "[1,2,3] (a list)" },
                    { id: "D", text: "(1,2) (a tuple)" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-12"
            },
            {
                id: 8,
                text: "For dictionaries, what does dict.get(key, default) do if key is missing?",
                options: [
                    { id: "A", text: "Raises KeyError" },
                    { id: "B", text: "Returns None and deletes the dict" },
                    { id: "C", text: "Inserts key with default and returns default" },
                    { id: "D", text: "Returns the provided default without raising an error" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-13"
            },
            {
                id: 9,
                text: "What is the return behavior of dict.pop(key) when key is present?",
                options: [
                    { id: "A", text: "Returns None" },
                    { id: "B", text: "Removes key and returns its value" },
                    { id: "C", text: "Raises KeyError even if present" },
                    { id: "D", text: "Returns the dict object" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-13"
            },
            {
                id: 10,
                text: "What does dict.popitem() do on a non-empty dict?",
                options: [
                    { id: "A", text: "Removes and returns a (key, value) pair" },
                    { id: "B", text: "Clears the dict" },
                    { id: "C", text: "Returns keys() view" },
                    { id: "D", text: "Raises KeyError" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-13"
            },
            {
                id: 11,
                text: "Which operator performs set intersection?",
                options: [
                    { id: "A", text: "|" },
                    { id: "B", text: "^" },
                    { id: "C", text: "&" },
                    { id: "D", text: "-" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-12"
            },
            {
                id: 12,
                text: "Which is the correct way to define a function with a default argument?",
                options: [
                    { id: "A", text: "def f(x=, y):" },
                    { id: "B", text: "def f(x, y=10):" },
                    { id: "C", text: "def f(x=10, y):" },
                    { id: "D", text: "def f(x y=10):" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-5"
            },
            {
                id: 13,
                text: "What will print(len('hello')) output?",
                options: [
                    { id: "A", text: "5" },
                    { id: "B", text: "4" },
                    { id: "C", text: "6" },
                    { id: "D", text: "'5'" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-3"
            },
            {
                id: 14,
                text: "How do you create an empty set in Python?",
                options: [
                    { id: "A", text: "{}" },
                    { id: "B", text: "set[]" },
                    { id: "C", text: "EmptySet()" },
                    { id: "D", text: "set()" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-12"
            },
            {
                id: 15,
                text: "Which of the following will create a shallow copy of a dict?",
                options: [
                    { id: "A", text: "dict1 = dict2" },
                    { id: "B", text: "dict2 = dict1.copy()" },
                    { id: "C", text: "dict2 = dict1[:]" },
                    { id: "D", text: "dict2 = copy.deepcopy(dict1)" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-13"
            },
            {
                id: 16,
                text: "In a while loop, what statement immediately skips to the next iteration?",
                options: [
                    { id: "A", text: "break" },
                    { id: "B", text: "return" },
                    { id: "C", text: "continue" },
                    { id: "D", text: "pass" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-6"
            },
            {
                id: 17,
                text: "What exception is raised by int('abc')?",
                options: [
                    { id: "A", text: "ValueError" },
                    { id: "B", text: "TypeError" },
                    { id: "C", text: "KeyError" },
                    { id: "D", text: "NameError" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-3"
            },
            {
                id: 18,
                text: "Which of these is correct unpacking of a list [1,2,3] into variables a,b,c?",
                options: [
                    { id: "A", text: "a,b = [1,2,3]" },
                    { id: "B", text: "a,b,c = [1,2,3]" },
                    { id: "C", text: "(a),(b),(c) = [1,2,3]" },
                    { id: "D", text: "a = b = c = [1,2,3]" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-6"
            },
            {
                id: 19,
                text: "What is the result of [x*2 for x in range(3)] ?",
                options: [
                    { id: "A", text: "(0,2,4)" },
                    { id: "B", text: "{0,2,4}" },
                    { id: "C", text: "'024'" },
                    { id: "D", text: "[0,2,4]" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-7"
            },
            {
                id: 20,
                text: "What is the output: bool(0) ?",
                options: [
                    { id: "A", text: "False" },
                    { id: "B", text: "True" },
                    { id: "C", text: "0" },
                    { id: "D", text: "None" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-1"
            },
            {
                id: 21,
                text: "In a class method, what does self refer to?",
                options: [
                    { id: "A", text: "The class object" },
                    { id: "B", text: "Global namespace" },
                    { id: "C", text: "The instance on which the method was called" },
                    { id: "D", text: "A magic built-in variable" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-15"
            },
            {
                id: 22,
                text: "What happens if you forget to include self as the first parameter of an instance method?",
                options: [
                    { id: "A", text: "Method becomes static automatically" },
                    { id: "B", text: "Python will raise a TypeError when calling the method on an instance" },
                    { id: "C", text: "It will silently work but not access attributes" },
                    { id: "D", text: "It converts to a classmethod" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-15"
            },
            {
                id: 23,
                text: "Which keyword is used to create an abstract base class in Python's abc module?",
                options: [
                    { id: "A", text: "@abstractmethod" },
                    { id: "B", text: "abstract" },
                    { id: "C", text: "virtual" },
                    { id: "D", text: "@interface" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-15"
            },
            {
                id: 24,
                text: "Given class A: pass; class B(A): pass — what is B called relative to A?",
                options: [
                    { id: "A", text: "Superclass" },
                    { id: "B", text: "Sibling class" },
                    { id: "C", text: "Unrelated class" },
                    { id: "D", text: "Subclass (derived class)" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-15"
            },
            {
                id: 25,
                text: "Which built-in will convert a string '3.14' to a floating-point number?",
                options: [
                    { id: "A", text: "int('3.14')" },
                    { id: "B", text: "float('3.14')" },
                    { id: "C", text: "str('3.14')" },
                    { id: "D", text: "complex('3.14')" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-2"
            },
            {
                id: 26,
                text: "In the sample Auction program, which input indicates termination of bidding?",
                options: [
                    { id: "A", text: "'quit'" },
                    { id: "B", text: "an empty string" },
                    { id: "C", text: "'stop' (case-insensitive)" },
                    { id: "D", text: "'end'" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-14"
            },
            {
                id: 27,
                text: "Which of these will correctly add an element x to set s?",
                options: [
                    { id: "A", text: "s.add(x)" },
                    { id: "B", text: "s.append(x)" },
                    { id: "C", text: "s.insert(x)" },
                    { id: "D", text: "s[x] = True" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-12"
            },
            {
                id: 28,
                text: "What is the correct way to check whether key 'k' exists in dict d?",
                options: [
                    { id: "A", text: "if d.has_key('k'):" },
                    { id: "B", text: "if 'k' in d:" },
                    { id: "C", text: "if d['k'] is not None:" },
                    { id: "D", text: "if d.get('k') == True:" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-13"
            },
            {
                id: 29,
                text: "What does the expression {1,2} | {2,3} produce?",
                options: [
                    { id: "A", text: "{1,2,3} & {2}" },
                    { id: "B", text: "{2}" },
                    { id: "C", text: "{1,3}" },
                    { id: "D", text: "{1,2,3} (union)" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-12"
            },
            {
                id: 30,
                text: "Which of these statements about list slicing is true?",
                options: [
                    { id: "A", text: "s[a:b] returns elements from index a up to b-1" },
                    { id: "B", text: "s[a:b] includes index b" },
                    { id: "C", text: "negative indices are not allowed" },
                    { id: "D", text: "slicing returns an iterator" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-4"
            },
            {
                id: 31,
                text: "What will this code print? print(2**3)",
                options: [
                    { id: "A", text: "6" },
                    { id: "B", text: "9" },
                    { id: "C", text: "8" },
                    { id: "D", text: "23" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-4"
            },
            {
                id: 32,
                text: "Which of the following is true about Python's pass statement?",
                options: [
                    { id: "A", text: "It raises NotImplementedError" },
                    { id: "B", text: "It's a no-op placeholder (does nothing)" },
                    { id: "C", text: "It exits the program" },
                    { id: "D", text: "It pauses execution for 1 second" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-4"
            },
            {
                id: 33,
                text: "Which built-in function returns a list of tuples pairing index and element?",
                options: [
                    { id: "A", text: "enumerate()" },
                    { id: "B", text: "zip()" },
                    { id: "C", text: "map()" },
                    { id: "D", text: "range()" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-5"
            },
            {
                id: 34,
                text: "What is the main difference between list and tuple?",
                options: [
                    { id: "A", text: "Lists are immutable, tuples are mutable" },
                    { id: "B", text: "Lists use parentheses" },
                    { id: "C", text: "Lists are mutable; tuples are immutable" },
                    { id: "D", text: "There is no difference" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-3"
            },
            {
                id: 35,
                text: "Which expression creates a dictionary mapping a to 1 and b to 2?",
                options: [
                    { id: "A", text: "{'a','b':1,2}" },
                    { id: "B", text: "{'a':1, 'b':2}" },
                    { id: "C", text: "dict('a':1,'b':2)" },
                    { id: "D", text: "['a':1,'b':2]" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-13"
            },
            {
                id: 36,
                text: "What will this print? print('Hello'.upper())",
                options: [
                    { id: "A", text: "hello" },
                    { id: "B", text: "Hello" },
                    { id: "C", text: "HELL0" },
                    { id: "D", text: "HELLO" }
                ],
                correctAnswer: "D",
                source: "Source: Lec-3"
            },
            {
                id: 37,
                text: "Which of the following is true about Python's variable scoping in functions?",
                options: [
                    { id: "A", text: "Assignment creates a new local variable unless declared global/nonlocal" },
                    { id: "B", text: "All variables are global by default" },
                    { id: "C", text: "Python has block scope like C" },
                    { id: "D", text: "Variables in functions cannot access globals" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-6"
            },
            {
                id: 38,
                text: "What does the expression list(range(2,8,2)) evaluate to?",
                options: [
                    { id: "A", text: "[2,8]" },
                    { id: "B", text: "[2,3,4,5,6,7,8]" },
                    { id: "C", text: "[2,4,6]" },
                    { id: "D", text: "[0,2,4,6,8]" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-6"
            },
            {
                id: 39,
                text: "Which of these is valid way to open a file for writing text?",
                options: [
                    { id: "A", text: "open('f','r')" },
                    { id: "B", text: "open('f','w')" },
                    { id: "C", text: "open('f','rb')" },
                    { id: "D", text: "open('f','a')" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-8"
            },
            // Adding 11 more questions to make 50 total
            {
                id: 40,
                text: "What is the output of the following code? print(3 * 'a')",
                options: [
                    { id: "A", text: "3" },
                    { id: "B", text: "aaa" },
                    { id: "C", text: "a a a" },
                    { id: "D", text: "Error" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-1"
            },
            {
                id: 41,
                text: "Which method is used to add an element at the end of a list?",
                options: [
                    { id: "A", text: "append()" },
                    { id: "B", text: "add()" },
                    { id: "C", text: "insert()" },
                    { id: "D", text: "extend()" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-4"
            },
            {
                id: 42,
                text: "What is the result of 10 % 3?",
                options: [
                    { id: "A", text: "1" },
                    { id: "B", text: "3" },
                    { id: "C", text: "0.333" },
                    { id: "D", text: "3.333" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-2"
            },
            {
                id: 43,
                text: "Which of these is not a valid variable name in Python?",
                options: [
                    { id: "A", text: "my_var" },
                    { id: "B", text: "_var" },
                    { id: "C", text: "2var" },
                    { id: "D", text: "var2" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-2"
            },
            {
                id: 44,
                text: "What is the correct way to create a function in Python?",
                options: [
                    { id: "A", text: "function myFunction():" },
                    { id: "B", text: "def myFunction():" },
                    { id: "C", text: "create myFunction():" },
                    { id: "D", text: "func myFunction():" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-5"
            },
            {
                id: 45,
                text: "What is the output of print(type([]))?",
                options: [
                    { id: "A", text: "<class 'list'>" },
                    { id: "B", text: "<class 'tuple'>" },
                    { id: "C", text: "<class 'dict'>" },
                    { id: "D", text: "<class 'set'>" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-3"
            },
            {
                id: 46,
                text: "Which operator is used for exponentiation in Python?",
                options: [
                    { id: "A", text: "^" },
                    { id: "B", text: "**" },
                    { id: "C", text: "*" },
                    { id: "D", text: "^^" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-2"
            },
            {
                id: 47,
                text: "What is the correct way to comment in Python?",
                options: [
                    { id: "A", text: "// This is a comment" },
                    { id: "B", text: "# This is a comment" },
                    { id: "C", text: "/* This is a comment */" },
                    { id: "D", text: "<!-- This is a comment -->" }
                ],
                correctAnswer: "B",
                source: "Source: Lec-1"
            },
            {
                id: 48,
                text: "Which of these is a correct way to create a list?",
                options: [
                    { id: "A", text: "list = [1, 2, 3]" },
                    { id: "B", text: "list = (1, 2, 3)" },
                    { id: "C", text: "list = {1, 2, 3}" },
                    { id: "D", text: "list = 1, 2, 3" }
                ],
                correctAnswer: "A",
                source: "Source: Lec-3"
            },
            {
                id: 49,
                text: "What is the result of 'Hello'[-1]?",
                options: [
                    { id: "A", text: "H" },
                    { id: "B", text: "e" },
                    { id: "C", text: "o" },
                    { id: "D", text: "Error" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-3"
            },
            {
                id: 50,
                text: "Which method returns the length of a list?",
                options: [
                    { id: "A", text: "length()" },
                    { id: "B", text: "size()" },
                    { id: "C", text: "len()" },
                    { id: "D", text: "count()" }
                ],
                correctAnswer: "C",
                source: "Source: Lec-3"
            }
        ];

        // Global variables
        let questions = [];
        let studentAnswers = {};
        let currentPage = 0;
        const questionsPerPage = 5;
        let timerInterval;
        let timeRemaining = 60 * 60; // 60 minutes in seconds
        let tabSwitchCount = 0;
        let warningCount = 0;
        let examStartTime;
        let autoSaveInterval;
        let isExamSubmitted = false;

        // DOM elements
        const welcomePage = document.getElementById('welcomePage');
        const examPage = document.getElementById('examPage');
        const resultPage = document.getElementById('resultPage');
        const studentForm = document.getElementById('studentForm');
        const startExamBtn = document.getElementById('startExamBtn');
        const timerDisplay = document.getElementById('timerDisplay');
        const questionsPanel = document.getElementById('questionsPanel');
        const navigatorGrid = document.getElementById('navigatorGrid');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const answeredCountEl = document.getElementById('answeredCount');
        const switchCountEl = document.getElementById('switchCount');
        const warningCountEl = document.getElementById('warningCount');
        const saveStatusEl = document.getElementById('saveStatus');
        const candidateNameEl = document.getElementById('candidateName');
        const candidateEmailEl = document.getElementById('candidateEmail');
        const candidateIdEl = document.getElementById('candidateId');
        const notification = document.getElementById('notification');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById('notificationMessage');
        const downloadBtn = document.getElementById('downloadBtn');
        const retakeBtn = document.getElementById('retakeBtn');

        // Form validation to enable/disable the start button
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = studentForm.querySelectorAll('input[required]');
            
            function checkFormValidity() {
                let isValid = true;
                inputs.forEach(input => {
                    if (!input.checked && input.type === 'checkbox') {
                        isValid = false;
                    } else if (input.type !== 'checkbox' && input.value.trim() === '') {
                        isValid = false;
                    }
                });
                
                startExamBtn.disabled = !isValid;
            }
            
            inputs.forEach(input => {
                input.addEventListener('input', checkFormValidity);
                input.addEventListener('change', checkFormValidity);
            });
            
            // Add hover effect to info items
            const infoItems = document.querySelectorAll('.info-item');
            infoItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    this.querySelector('i').style.transform = 'scale(1.2)';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.querySelector('i').style.transform = 'scale(1)';
                });
            });
        });

        // Start exam when form is submitted
        studentForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get student information
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const studentId = document.getElementById('studentId').value;
            
            // Set candidate information
            candidateNameEl.textContent = fullName;
            candidateEmailEl.textContent = email;
            candidateIdEl.textContent = studentId;
            
            // Shuffle questions
            questions = [...originalQuestions];
            shuffleArray(questions);
            
            // Initialize student answers
            questions.forEach(q => {
                studentAnswers[q.id] = null;
            });
            
            // Record exam start time
            examStartTime = new Date();
            
            // Hide welcome page and show exam page
            welcomePage.style.display = 'none';
            examPage.style.display = 'block';
            
            // Initialize exam
            initializeExam();
            
            // Start timer
            startTimer();
            
            // Start auto-save
            startAutoSave();
            
            // Set up tab switch detection
            setupTabSwitchDetection();
            
            // Prevent copy, paste, and right-click
            preventCheating();
        });

        // Shuffle array function
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Initialize exam
        function initializeExam() {
            renderQuestions();
            renderNavigator();
            updateProgress();
            updateStats();
        }

        // Render questions for current page
        function renderQuestions() {
            questionsPanel.innerHTML = '';
            
            const startIndex = currentPage * questionsPerPage;
            const endIndex = Math.min(startIndex + questionsPerPage, questions.length);
            
            for (let i = startIndex; i < endIndex; i++) {
                const question = questions[i];
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                
                const questionHeader = document.createElement('div');
                questionHeader.className = 'question-header';
                
                const questionNumber = document.createElement('div');
                questionNumber.className = 'question-number';
                questionNumber.textContent = `Question ${i + 1}`;
                
                const questionStatus = document.createElement('div');
                questionStatus.className = 'question-status';
                if (studentAnswers[question.id]) {
                    questionStatus.textContent = 'Answered';
                    questionStatus.classList.add('status-answered');
                } else {
                    questionStatus.textContent = 'Unanswered';
                    questionStatus.classList.add('status-unanswered');
                }
                
                questionHeader.appendChild(questionNumber);
                questionHeader.appendChild(questionStatus);
                
                const questionText = document.createElement('div');
                questionText.className = 'question-text';
                questionText.textContent = question.text;
                
                const options = document.createElement('div');
                options.className = 'options';
                
                question.options.forEach(option => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = `question-${question.id}`;
                    input.value = option.id;
                    input.id = `q${question.id}-opt${option.id}`;
                    
                    if (studentAnswers[question.id] === option.id) {
                        input.checked = true;
                    }
                    
                    input.addEventListener('change', function() {
                        studentAnswers[question.id] = option.id;
                        updateProgress();
                        updateStats();
                        updateNavigator();
                    });
                    
                    const label = document.createElement('label');
                    label.htmlFor = `q${question.id}-opt${option.id}`;
                    label.textContent = `${option.id}. ${option.text}`;
                    
                    optionDiv.appendChild(input);
                    optionDiv.appendChild(label);
                    options.appendChild(optionDiv);
                });
                
                questionCard.appendChild(questionHeader);
                questionCard.appendChild(questionText);
                questionCard.appendChild(options);
                questionsPanel.appendChild(questionCard);
            }
            
            // Update pagination buttons
            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = endIndex >= questions.length;
        }

        // Render question navigator
        function renderNavigator() {
            navigatorGrid.innerHTML = '';
            
            questions.forEach((question, index) => {
                const navItem = document.createElement('div');
                navItem.className = 'nav-item';
                navItem.textContent = index + 1;
                
                const pageIndex = Math.floor(index / questionsPerPage);
                
                if (studentAnswers[question.id]) {
                    navItem.classList.add('answered');
                } else {
                    navItem.classList.add('unanswered');
                }
                
                if (pageIndex === currentPage) {
                    navItem.classList.add('current');
                }
                
                navItem.addEventListener('click', function() {
                    currentPage = pageIndex;
                    renderQuestions();
                    renderNavigator();
                });
                
                navigatorGrid.appendChild(navItem);
            });
        }

        // Update navigator
        function updateNavigator() {
            const navItems = navigatorGrid.querySelectorAll('.nav-item');
            
            questions.forEach((question, index) => {
                const navItem = navItems[index];
                
                if (studentAnswers[question.id]) {
                    navItem.classList.remove('unanswered');
                    navItem.classList.add('answered');
                } else {
                    navItem.classList.remove('answered');
                    navItem.classList.add('unanswered');
                }
            });
        }

        // Update progress bar
        function updateProgress() {
            const answeredCount = Object.values(studentAnswers).filter(answer => answer !== null).length;
            const progressPercent = (answeredCount / questions.length) * 100;
            
            progressFill.style.width = `${progressPercent}%`;
            progressText.textContent = `${Math.round(progressPercent)}% Complete (${answeredCount}/${questions.length} questions)`;
        }

        // Update statistics
        function updateStats() {
            const answeredCount = Object.values(studentAnswers).filter(answer => answer !== null).length;
            answeredCountEl.textContent = answeredCount;
            switchCountEl.textContent = tabSwitchCount;
            warningCountEl.textContent = warningCount;
        }

        // Start timer
        function startTimer() {
            updateTimerDisplay();
            
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            
            // Change color when time is running out
            if (timeRemaining < 300) { // Less than 5 minutes
                timerDisplay.style.color = 'var(--danger)';
            } else if (timeRemaining < 600) { // Less than 10 minutes
                timerDisplay.style.color = 'var(--warning)';
            }
        }

        // Start auto-save
        function startAutoSave() {
            saveStatusEl.textContent = 'Active';
            
            autoSaveInterval = setInterval(() => {
                // In a real application, this would save to a server
                console.log('Auto-saving progress...', studentAnswers);
                saveStatusEl.textContent = 'Saved';
                
                setTimeout(() => {
                    saveStatusEl.textContent = 'Active';
                }, 2000);
            }, 30000); // Every 30 seconds
        }

        // Set up tab switch detection
        function setupTabSwitchDetection() {
            document.addEventListener('visibilitychange', function() {
                if (document.hidden && !isExamSubmitted) {
                    tabSwitchCount++;
                    updateStats();
                    
                    if (tabSwitchCount > 3) {
                        showNotification('Exam Auto-Submitted', 'You have exceeded the maximum number of tab switches. Your exam has been automatically submitted.', 'error');
                        submitExam();
                    } else {
                        warningCount++;
                        updateStats();
                        showNotification('Tab Switch Detected', `You have switched tabs ${tabSwitchCount} time(s). Maximum allowed: 3.`, 'warning');
                    }
                }
            });
        }

        // Prevent cheating (copy, paste, right-click)
        function preventCheating() {
            // Disable right-click
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                showNotification('Action Blocked', 'Right-click is disabled during the exam.', 'warning');
            });
            
            // Disable copy
            document.addEventListener('copy', function(e) {
                e.preventDefault();
                showNotification('Action Blocked', 'Copy is disabled during the exam.', 'warning');
            });
            
            // Disable paste
            document.addEventListener('paste', function(e) {
                e.preventDefault();
                showNotification('Action Blocked', 'Paste is disabled during the exam.', 'warning');
            });
        }

        // Show notification
        function showNotification(title, message, type = 'info') {
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // Remove existing type classes
            notification.classList.remove('warning', 'error', 'info');
            
            // Add appropriate type class
            if (type === 'warning' || type === 'error' || type === 'info') {
                notification.classList.add(type);
            }
            
            // Show notification
            notification.classList.add('show');
            
            // Hide after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // Pagination event listeners
        prevBtn.addEventListener('click', function() {
            if (currentPage > 0) {
                currentPage--;
                renderQuestions();
                renderNavigator();
            }
        });

        nextBtn.addEventListener('click', function() {
            if ((currentPage + 1) * questionsPerPage < questions.length) {
                currentPage++;
                renderQuestions();
                renderNavigator();
            }
        });

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function confirmSubmit() {
            closeModal('submitModal');
            submitExam();
        }

        function confirmRetake() {
            closeModal('retakeModal');
            window.location.reload();
        }

        // Submit exam
        submitBtn.addEventListener('click', function() {
            showModal('submitModal');
        });

        function submitExam() {
            if (isExamSubmitted) return;
            
            isExamSubmitted = true;
            
            // Clear intervals
            clearInterval(timerInterval);
            clearInterval(autoSaveInterval);
            
            // Calculate results
            const results = calculateResults();
            
            // Display results
            displayResults(results);
            
            // Hide exam page and show result page
            examPage.style.display = 'none';
            resultPage.style.display = 'block';
        }

        // Calculate exam results
        function calculateResults() {
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;
            
            questions.forEach(question => {
                const studentAnswer = studentAnswers[question.id];
                
                if (studentAnswer === null) {
                    unansweredCount++;
                } else if (studentAnswer === question.correctAnswer) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            });
            
            const scorePercent = Math.round((correctCount / questions.length) * 100);
            
            // Calculate time taken
            const endTime = new Date();
            const timeTakenInSeconds = Math.floor((endTime - examStartTime) / 1000);
            const minutes = Math.floor(timeTakenInSeconds / 60);
            const seconds = timeTakenInSeconds % 60;
            const timeTaken = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            
            return {
                studentInfo: {
                    fullName: document.getElementById('candidateName').textContent,
                    email: document.getElementById('candidateEmail').textContent,
                    studentId: document.getElementById('candidateId').textContent
                },
                correctCount,
                incorrectCount,
                unansweredCount,
                scorePercent,
                timeTaken,
                tabSwitchCount,
                warningCount,
                studentAnswers,
                examStartTime,
                endTime
            };
        }

        // Display results
        function displayResults(results) {
            // Set score circle
            document.documentElement.style.setProperty('--score-percent', `${results.scorePercent}%`);
            document.getElementById('scoreValue').textContent = `${results.scorePercent}%`;
            
            // Set statistics
            document.getElementById('correctCount').textContent = results.correctCount;
            document.getElementById('incorrectCount').textContent = results.incorrectCount;
            document.getElementById('unansweredCount').textContent = results.unansweredCount;
            
            // Set time statistics
            document.getElementById('timeTaken').textContent = results.timeTaken;
            document.getElementById('totalSwitches').textContent = results.tabSwitchCount;
            document.getElementById('totalWarnings').textContent = results.warningCount;
            
            // Store results for download
            window.examResults = results;
        }

        // Download results as JSON
        downloadBtn.addEventListener('click', function() {
            const results = window.examResults;
            
            // Create a JSON string
            const dataStr = JSON.stringify(results, null, 2);
            
            // Create a blob
            const blob = new Blob([dataStr], { type: 'application/json' });
            
            // Create a download link
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            // Get student name and format it for filename (remove spaces and special characters)
            const studentName = results.studentInfo.fullName.replace(/[^a-zA-Z0-9]/g, '_');
            a.download = `${studentName}_Python_MCQ_Results_${new Date().toISOString().slice(0, 10)}.json`;
            
            // Trigger download
            document.body.appendChild(a);
            a.click();
            
            // Clean up
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 0);
        });

        // Retake exam
        retakeBtn.addEventListener('click', function() {
            showModal('retakeModal');
        });

        // Reset exam state when retaking
        function resetExamState() {
            // Reset all variables
            questions = [];
            studentAnswers = {};
            currentPage = 0;
            timeRemaining = 60 * 60;
            tabSwitchCount = 0;
            warningCount = 0;
            isExamSubmitted = false;
            
            // Reset form
            studentForm.reset();
            startExamBtn.disabled = true;
            
            // Hide result page and show welcome page
            resultPage.style.display = 'none';
            welcomePage.style.display = 'flex';
            
            // Reset timer display
            timerDisplay.textContent = '60:00';
            timerDisplay.style.color = 'var(--danger)';
        }
    </script>

    <!-- Submit Exam Modal -->
    <div class="modal" id="submitModal">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-paper-plane"></i>
                <h2>Submit Exam</h2>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to submit your exam?</p>
                <p style="color: var(--danger); font-size: 0.9rem; margin-top: 10px;">
                    You cannot change your answers after submission.
                </p>
            </div>
            <div class="modal-buttons">
                <button class="btn" onclick="closeModal('submitModal')" style="background-color: var(--medium-gray);">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" onclick="confirmSubmit()" style="background-color: var(--success);">
                    <i class="fas fa-check"></i> Submit
                </button>
            </div>
        </div>
    </div>

    <!-- Retake Exam Modal -->
    <div class="modal" id="retakeModal">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-redo"></i>
                <h2>Retake Exam</h2>
            </div>
            <div class="modal-body">
                <p>Would you like to retake the exam?</p>
                <p style="color: var(--warning); font-size: 0.9rem; margin-top: 10px;">
                    Your current progress and results will be reset.
                </p>
            </div>
            <div class="modal-buttons">
                <button class="btn" onclick="closeModal('retakeModal')" style="background-color: var(--medium-gray);">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn" onclick="confirmRetake()" style="background-color: var(--primary);">
                    <i class="fas fa-check"></i> Retake
                </button>
            </div>
        </div>
    </div>
</body>
</html>
